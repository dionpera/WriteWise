<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WriteWise Grammar Checker</title>
  <style>
    body { font-family: Arial, sans-serif; }
    .container { max-width: 800px; margin: 20px auto; padding: 20px; }
    h1, h2 { text-align: center; color: #333; }
    .highlight { background-color: yellow; font-weight: bold; }
    #grammar-result { color: red; margin-top: 20px; }
    textarea { width: 100%; height: 150px; margin-bottom: 10px; }
    .suggestion { color: green; font-weight: bold; }
    .output-box { margin-top: 20px; padding: 10px; background-color: #f0f0f0; border-radius: 5px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>WriteWise Grammar Checker & Dictionary</h1>

    <!-- Grammar Checker Section -->
    <h2>Grammar Checker</h2>
    <textarea id="text-input" placeholder="Enter text to check grammar..."></textarea>
    <button onclick="checkGrammar()">Check Grammar</button>
    <div id="grammar-result"></div>

    <!-- Suggestions Output -->
    <div id="suggestions-output" class="output-box"></div>
  </div>

  <script>
    // Basic Common Mistakes for Spelling Check
    const commonMistakes = {
      "teh": "the",
      "recieve": "receive",
      "alot": "a lot",
      "wich": "which",
      "definately": "definitely"
    };

    function checkGrammar() {
      let inputText = document.getElementById('text-input').value;
      let grammarResult = document.getElementById('grammar-result');
      let suggestionsOutput = document.getElementById('suggestions-output');
      let resultText = inputText;

      // Initialize results
      let issuesFound = false;
      let issueMessages = [];

      // Step 1: Capitalization check - Ensure the first word of each sentence starts with a capital letter
      let sentences = inputText.split(/([.!?])/);  // Split the text into sentences based on punctuation
      sentences = sentences.filter(Boolean);  // Remove empty items

      // Check if the first letter of each sentence is capitalized
      sentences.forEach((sentence, index) => {
        let trimmedSentence = sentence.trim();
        if (trimmedSentence.charAt(0) !== trimmedSentence.charAt(0).toUpperCase()) {
          issuesFound = true;
          issueMessages.push(`Issue: The first letter of the sentence should be capitalized. Sentence: "${trimmedSentence}"`);
          // Capitalize the first letter
          sentences[index] = trimmedSentence.charAt(0).toUpperCase() + trimmedSentence.slice(1);
        }
      });

      // Rejoin sentences after fixing capitalization
      resultText = sentences.join(' ');

      // Step 2: Check for punctuation at the end of each sentence
      let punctuationPattern = /[.!?]$/;
      sentences.forEach((sentence, index) => {
        if (!punctuationPattern.test(sentence.trim())) {
          issuesFound = true;
          issueMessages.push(`Issue: Missing punctuation at the end of the sentence. Please add a period, question mark, or exclamation mark. Sentence: "${sentence.trim()}"`);
          // Add a period if missing
          sentences[index] = sentence.trim() + '.';
        }
      });

      // Step 3: Spelling check
      let words = resultText.split(' ');
      let correctedText = words.map(word => {
        if (commonMistakes[word.toLowerCase()]) {
          return `<span class='highlight'>${word} (Did you mean "${commonMistakes[word.toLowerCase()]}?")</span>`;
        }
        return word;
      }).join(' ');

      suggestionsOutput.innerHTML = `<p><b>Spelling Suggestions:</b> ${correctedText}</p>`;

      if (issuesFound) {
        grammarResult.innerHTML = issueMessages.join("<br>");
      } else {
        grammarResult.innerHTML = "No grammar or punctuation issues found!";
      }

      document.getElementById('text-input').value = resultText;
    }
  </script>
</body>
</html>
